<!DOCTYPE html>
<html lang="eg" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

 <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create Contest</title>
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" />    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"/>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

 <script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>

 <script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    
    
  </head>

  <body class="body1">
  
    <section class="section2">
   
      <div class="overla">
        <div class="container-fluid container_contest">
          <div class="nav mt-2 bg-white ">
            <div class="left mx-5 mt-1">
              <img src="images/Grouplogo.svg" alt="logo"  class="mb-2 img_profile"  width="60"
              height="70" />
              <p class="logo-text ">WEBKORPS</p>
            </div>
            <div class="right mx-4">
              <div class="dropdown">
                <a class="btn web_btn  text-white " href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                  <img src="images/Rectangle.svg" alt="rectangle" height="25px" width="25px" /> <span class="dropdown_icon1 me-4"> Raj kushwah</span> <i class="fa-solid fa-chevron-down fa-2xs"></i>
                </a>       
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <li><a class="dropdown-item p-2" href="#">Logout</a></li>                                   
                </ul>
              </div>
            </div>
          </div>         
          <div class="container mx-auto">
            <div class="background_contest mx-5 card_scroll1">
              <div class="text-center background_contest_inner">
                <h1 class="fw-bold">Contest Created</h1>
              </div>
              <div class="multiplecontest row row-cols-1 row-cols-md-4 mx-5 mt-5 row_cards">                          
                <div class="click col mb-4" th:each="q:${contest}" id="click">
                 <div  data-bs-toggle="modal" data-bs-target="#exampleModal" class="click2" data-id="title_1">
                 <input type="hidden" th:id="${q.contestId}" class="contestid" th:value="${q.contestId}"></input>								
                  <div class="card card_size">
                    <img
                      src="https://source.unsplash.com/random/100x50?sig=1"
                      class="card-img-top"
                      alt="..."
                      style="border-radius: 15px 15px 0px 0px"
                    />
                    <div class="card-body">                 
                      <h5 class="h55 card-title" th:text="${q.contestName}"></h5>
                      <p class="card-text" th:text="${q.contestDescription}">
                        <br />
                        <small class="small text-secondary">Changes 02/09/2012</small>
                      </p>
                    </div>
                  </div>
                  </div>
                </div>             
            <div class="col mb-4 card_size"> 
                  <div  data-bs-toggle="modal" data-bs-target="#exampleModal1">
                  <div class="card card_size">
                    <div class="text-center mt-3 mb-3 div_extra">
                      <img src="./images/add.svg" alt="add" class="add_context_img mt-1" />
                    </div>
                    <div class="card-body">
                      <h5 class="card-title">Create Contest</h5>
                      <p class="card-text">
                        Add Description<br />
                        <small class="small text-secondary"
                          >Create New Contest</small
                        >
                      </p>
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>                  
  <div
            class="modal fade"
            id="exampleModal1"
            tabindex="-1"
            aria-labelledby="exampleModalLabel"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content  ">
                <div class="modal-header">
                  <h2 class="modal-title fw-bold" id="exampleModalLabel">
                  Create A Contest
                  </h2> <div
                      type="div"
                      class="btn-close1"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    > <img src="images/crossbtn.svg" alt="logo"  
                 /></div>
                </div>
                <div class="modal-body">
                  <label  class="mb-2">Name of Contest</label>
                  <input type="text" class="contestname form-control bg-light"/>
                  <label  class="mb-2 mt-2">Add Description</label>
                  <input type="text" class="contestdescription form-control textarea_description bg-light" name="contestdescription"/>               
                <label  class="mb-2 mt-2">Level</label><br/>
                 <select
					class="contestlevel">										
					<option value="Level 1">Level 1</option>
					<option value="Level 2">Level 2</option>					
				</select>               
              </div>
                <div class="modal_footer_fresher1 ">
                  <button type="button" class="save btn-primary  modal-btn">
                   Create                  
                  </button>
                  <button type="button" class="notnowbtn btn-outline-primary mx-5 btn_cance"  data-bs-dismiss="modal">Not Now</button>          
                </div>
              </div>
            </div>
            </div>
     <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered ">
                <div class="modal-content  ">
                  <div class="modal-header">                   
                    <div
                      type="div"
                      class="btn-close1"
                      data-bs-dismiss="modal"
                      aria-label="Close"> <img src="images/crossbtn.svg" alt="logo"/></div>
                  </div>
                  <div class="modal-body">
                    <span class="dropdown_icon px-2 me-5"> Select Level</span>                   
                     <select class="leveltoseequestions">										
					<option value="Level 1">Level 1</option>
					<option value="Level 2">Level 2</option>					
				</select>                      
                  </div>                    
                  <div class="modal_footer_fresher ">
                    <button type="button" class="continuetoseequestions btn-primary modal-btn ">
                     Continue
                    </button>                             
                    <button type="button" class="btn btn-outline-primary mx-5 btn_cancel1 modal-btn"  data-bs-dismiss="modal"> Cancel</button>                 
                  </div>                                
                </div>
              </div>
            </div>
          
          </div>
            <div>
              <p class="text-center text-white fw-bold mt-3">
                Copyright@webkorps2021
              </p>
            </div>
          </div>
        </div>     
    </section>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  $(document).ready(function () {
  $(".save").on("click", function() {
	  var contestName = $(".contestname").val();
	  var contestDescription = $(".contestdescription").val();
	  var contestLevel = $(".contestlevel").val();
	  var contestId;
 var Contest = {
			"contestName" :$(".contestname").val(),
			"contestDescription" :$(".contestdescription").val(),
			"contestLevel" :$(".contestlevel").val(),		
	};
	console.log("Contest : ",Contest);
	
	$.ajax({
		url : "/addcontest",
		contentType : "application/json; charset=utf-8",
		dataType : "json",
		method : "POST",
		data : JSON.stringify(Contest),

		success : function(response) {
			contestId = response.contestId;
			console.log(response.contestId);
			
		},

		error : function(error) {
			console.log(error);
		},

	  });	
	});

	  var contestid='';
	  var level='';
  $(".btn-close1").on("click", function() {
	  window.location.href = "adminhome";
	  console.log("close is working");	  
  });
  
  $(".notnowbtn").on("click", function() {
	  window.location.href = "adminhome";
	  console.log("not now");	  
  });
  
  $(".continuetoseequestions").on("click", function() {
	  level = $(".leveltoseequestions").val();
	  console.log(contestid);	  
	  console.log(level);
	  var Contest = {
				"contestId" :contestid,				
				"contestLevel" :level	
		};
	  $.ajax({
			url : "/findcontest",
			contentType : "application/json; charset=utf-8",
			dataType : "json",
			method : "POST",
			data : JSON.stringify(Contest),
			success : function(response) {				
				console.log(response);	
				window.location.href = "returnquestionlistforspecificcontest";
			},
			error : function(error) {
				console.log(error);
			},

		  });
	  
   //  console.log($(".leveltoseequestions").val());	  
  });
  $(".click").on("click", function() {		 	 
	  contestid = this.getElementsByTagName('input')[0].getAttribute( 'value' );	
	  });
  });
  </script>
  </body>
</html>